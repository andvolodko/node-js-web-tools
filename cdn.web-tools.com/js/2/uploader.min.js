/*
 Bootstrap-select v1.12.4 (http://silviomoreto.github.io/bootstrap-select)

 Copyright 2013-2017 bootstrap-select
 Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 jQuery UI - v1.11.4+CommonJS - 2015-08-28
 http://jqueryui.com
 Includes: widget.js
 Copyright 2015 jQuery Foundation and other contributors; Licensed MIT  jQuery UI Widget 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/jQuery.widget/
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,g,a){c!=Array.prototype&&c!=Object.prototype&&(c[g]=a.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,g,a,b){if(g){a=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var d=c[b];d in a||(a[d]={});a=a[d]}c=c[c.length-1];b=a[c];g=g(b);g!=b&&null!=g&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Object.is",function(c){return c?c:function(c,a){return c===a?0!==c||1/c===1/a:c!==c&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,a){var b=this;b instanceof String&&(b=String(b));var d=b.length;for(a=a||0;a<d;a++)if(b[a]==c||Object.is(b[a],c))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,g,a){if(null==c)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,a){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,a||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(c,a){var b=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var d=b.length,e=c.length;a=Math.max(0,Math.min(a|0,b.length));for(var f=0;f<e&&a<d;)if(b[a++]!=c[f++])return!1;return f>=e}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var c=0;return function(g){return $jscomp.SYMBOL_PREFIX+(g||"")+c++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(c){var g=0;return $jscomp.iteratorPrototype(function(){return g<c.length?{done:!1,value:c[g++]}:{done:!0}})};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,g){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var a=0,b={next:function(){if(a<c.length){var d=a++;return{value:g(d,c[d]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.findInternal=function(c,g,a){c instanceof String&&(c=String(c));for(var b=c.length,d=0;d<b;d++){var e=c[d];if(g.call(a,e,d,c))return{i:d,v:e}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,a){return $jscomp.findInternal(this,c,a).v}},"es6","es3");
!function(c,g){"function"==typeof define&&define.amd?define(["jquery"],function(a){return g(a)}):"object"==typeof module&&module.exports?module.exports=g(require("jquery")):g(c.jQuery)}(this,function(c){!function(c){function a(a){return c.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,
ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){a=a?a.replace(this.re,this.ch):""}),a}function b(a){var b=arguments,d=a;[].shift.apply(b);var k,e=this.each(function(){var a=c(this);if(a.is("select")){var e=a.data("selectpicker"),f="object"==typeof d&&d;if(e){if(f)for(var p in f)f.hasOwnProperty(p)&&(e.options[p]=f[p])}else e=c.extend({},m.DEFAULTS,c.fn.selectpicker.defaults||{},a.data(),f),e.template=c.extend({},m.DEFAULTS.template,c.fn.selectpicker.defaults?
c.fn.selectpicker.defaults.template:{},a.data().template,f.template),a.data("selectpicker",e=new m(this,e));"string"==typeof d&&(k=e[d]instanceof Function?e[d].apply(e,b):e.options[d])}});return"undefined"!=typeof k?k:e}String.prototype.includes||!function(){var a={}.toString,c=function(){try{var a={},c=Object.defineProperty,b=c(a,a,a)&&c}catch(w){}return b}(),b="".indexOf,d=function(c){if(null==this)throw new TypeError;var d=String(this);if(c&&"[object RegExp]"==a.call(c))throw new TypeError;var k=
d.length,e=String(c),f=e.length,p=1<arguments.length?arguments[1]:void 0;p=p?Number(p):0;p!=p&&(p=0);return!(f+Math.min(Math.max(p,0),k)>k)&&-1!=b.call(d,e,p)};c?c(String.prototype,"includes",{value:d,configurable:!0,writable:!0}):String.prototype.includes=d}();String.prototype.startsWith||!function(){var a=function(){try{var a={},c=Object.defineProperty,b=c(a,a,a)&&c}catch(t){}return b}(),c={}.toString,b=function(a){if(null==this)throw new TypeError;var b=String(this);if(a&&"[object RegExp]"==c.call(a))throw new TypeError;
var d=b.length,k=String(a),e=k.length,f=1<arguments.length?arguments[1]:void 0;f=f?Number(f):0;f!=f&&(f=0);f=Math.min(Math.max(f,0),d);if(e+f>d)return!1;for(d=-1;++d<e;)if(b.charCodeAt(f+d)!=k.charCodeAt(d))return!1;return!0};a?a(String.prototype,"startsWith",{value:b,configurable:!0,writable:!0}):String.prototype.startsWith=b}();Object.keys||(Object.keys=function(a,c,b){b=[];for(c in a)b.hasOwnProperty.call(a,c)&&b.push(c);return b});var d=!1,e=c.valHooks.select.set;c.valHooks.select.set=function(a,
b){return b&&!d&&c(a).data("selected",!0),e.apply(this,arguments)};var f=null;try{var h=(new Event("change"),!0)}catch(k){h=!1}c.fn.triggerNative=function(a){var c,b=this[0];b.dispatchEvent?(h?c=new Event(a,{bubbles:!0}):(c=document.createEvent("Event"),c.initEvent(a,!0,!1)),b.dispatchEvent(c)):b.fireEvent?(c=document.createEventObject(),c.eventType=a,b.fireEvent("on"+a,c)):this.trigger(a)};c.expr.pseudos.icontains=function(a,b,d){a=c(a).find("a");return(a.data("tokens")||a.text()).toString().toUpperCase().includes(d[3].toUpperCase())};
c.expr.pseudos.ibegins=function(a,b,d){a=c(a).find("a");return(a.data("tokens")||a.text()).toString().toUpperCase().startsWith(d[3].toUpperCase())};c.expr.pseudos.aicontains=function(a,b,d){a=c(a).find("a");return(a.data("tokens")||a.data("normalizedText")||a.text()).toString().toUpperCase().includes(d[3].toUpperCase())};c.expr.pseudos.aibegins=function(a,b,d){a=c(a).find("a");return(a.data("tokens")||a.data("normalizedText")||a.text()).toString().toUpperCase().startsWith(d[3].toUpperCase())};var l=
function(a){var c=function(c){return a[c]},b="(?:"+Object.keys(a).join("|")+")",d=RegExp(b),k=RegExp(b,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(k,c):a}},g=l({"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"}),n=l({"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26#x27;":"'","\x26#x60;":"`"}),m=function(a,b){d||(c.valHooks.select.set=e,d=!0);this.$element=c(a);this.$lis=this.$menu=this.$button=this.$newElement=
null;this.options=b;null===this.options.title&&(this.options.title=this.$element.attr("title"));a=this.options.windowPadding;"number"==typeof a&&(this.options.windowPadding=[a,a,a,a]);this.val=m.prototype.val;this.render=m.prototype.render;this.refresh=m.prototype.refresh;this.setStyle=m.prototype.setStyle;this.selectAll=m.prototype.selectAll;this.deselectAll=m.prototype.deselectAll;this.destroy=m.prototype.destroy;this.remove=m.prototype.remove;this.show=m.prototype.show;this.hide=m.prototype.hide;
this.init()};m.VERSION="1.12.4";m.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(a,c){return 1==a?"{0} item selected":"{0} items selected"},maxOptionsText:function(a,c){return[1==a?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==c?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",
styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'\x3cspan class\x3d"caret"\x3e\x3c/span\x3e'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0};m.prototype=
{constructor:m,init:function(){var a=this,b=this.$element.attr("id");this.$element.addClass("bs-select-hidden");this.liObj={};this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement).appendTo(this.$newElement);this.$button=this.$newElement.children("button");this.$menu=this.$newElement.children(".dropdown-menu");this.$menuInner=this.$menu.children(".inner");this.$searchbox=this.$menu.find("input");
this.$element.removeClass("bs-select-hidden");!0===this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right");"undefined"!=typeof b&&(this.$button.attr("data-id",b),c('label[for\x3d"'+b+'"]').click(function(c){c.preventDefault();a.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",
this);this.options.mobile&&this.mobile();this.$newElement.on({"hide.bs.dropdown":function(c){a.$menuInner.attr("aria-expanded",!1);a.$element.trigger("hide.bs.select",c)},"hidden.bs.dropdown":function(c){a.$element.trigger("hidden.bs.select",c)},"show.bs.dropdown":function(c){a.$menuInner.attr("aria-expanded",!0);a.$element.trigger("show.bs.select",c)},"shown.bs.dropdown":function(c){a.$element.trigger("shown.bs.select",c)}});a.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){a.$button.addClass("bs-invalid");
a.$element.on({"focus.bs.select":function(){a.$button.focus();a.$element.off("focus.bs.select")},"shown.bs.select":function(){a.$element.val(a.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&a.$button.removeClass("bs-invalid");a.$element.off("rendered.bs.select")}});a.$button.on("blur.bs.select",function(){a.$element.focus().blur();a.$button.off("blur.bs.select")})});setTimeout(function(){a.$element.trigger("loaded.bs.select")})},createDropdown:function(){var a=
this.multiple||this.options.showTick?" show-tick":"",b=this.$element.parent().hasClass("input-group")?" input-group-btn":"",d=this.autofocus?" autofocus":"",e=this.options.header?'\x3cdiv class\x3d"popover-title"\x3e\x3cbutton type\x3d"button" class\x3d"close" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e'+this.options.header+"\x3c/div\x3e":"",f=this.options.liveSearch?'\x3cdiv class\x3d"bs-searchbox"\x3e\x3cinput type\x3d"text" class\x3d"form-control" autocomplete\x3d"off"'+(null===this.options.liveSearchPlaceholder?
"":' placeholder\x3d"'+g(this.options.liveSearchPlaceholder)+'"')+' role\x3d"textbox" aria-label\x3d"Search"\x3e\x3c/div\x3e':"";return c('\x3cdiv class\x3d"btn-group bootstrap-select'+a+b+'"\x3e\x3cbutton type\x3d"button" class\x3d"'+this.options.styleBase+' dropdown-toggle" data-toggle\x3d"dropdown"'+d+' role\x3d"button"\x3e\x3cspan class\x3d"filter-option pull-left"\x3e\x3c/span\x3e\x26nbsp;\x3cspan class\x3d"bs-caret"\x3e'+this.options.template.caret+'\x3c/span\x3e\x3c/button\x3e\x3cdiv class\x3d"dropdown-menu open" role\x3d"combobox"\x3e'+
e+f+(this.multiple&&this.options.actionsBox?'\x3cdiv class\x3d"bs-actionsbox"\x3e\x3cdiv class\x3d"btn-group btn-group-sm btn-block"\x3e\x3cbutton type\x3d"button" class\x3d"actions-btn bs-select-all btn btn-default"\x3e'+this.options.selectAllText+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"actions-btn bs-deselect-all btn btn-default"\x3e'+this.options.deselectAllText+"\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e":"")+'\x3cul class\x3d"dropdown-menu inner" role\x3d"listbox" aria-expanded\x3d"false"\x3e\x3c/ul\x3e'+
(this.multiple&&this.options.doneButton?'\x3cdiv class\x3d"bs-donebutton"\x3e\x3cdiv class\x3d"btn-group btn-block"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-sm btn-default"\x3e'+this.options.doneButtonText+"\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/div\x3e")},createView:function(){var a=this.createDropdown(),c=this.createLi();return a.find("ul")[0].innerHTML=c,a},reloadLi:function(){var a=this.createLi();this.$menuInner[0].innerHTML=a},createLi:function(){var b=this,d=
[],e=0,f=document.createElement("option"),h=-1,l=function(a,c,b,d){return"\x3cli"+("undefined"!=typeof b&&""!==b?' class\x3d"'+b+'"':"")+("undefined"!=typeof c&&null!==c?' data-original-index\x3d"'+c+'"':"")+("undefined"!=typeof d&&null!==d?'data-optgroup\x3d"'+d+'"':"")+"\x3e"+a+"\x3c/li\x3e"},q=function(d,e,f,k){return'\x3ca tabindex\x3d"0"'+("undefined"!=typeof e?' class\x3d"'+e+'"':"")+(f?' style\x3d"'+f+'"':"")+(b.options.liveSearchNormalize?' data-normalized-text\x3d"'+a(g(c(d).html()))+'"':
"")+("undefined"!=typeof k||null!==k?' data-tokens\x3d"'+k+'"':"")+' role\x3d"option"\x3e'+d+'\x3cspan class\x3d"'+b.options.iconBase+" "+b.options.tickIcon+' check-mark"\x3e\x3c/span\x3e\x3c/a\x3e'};if(this.options.title&&!this.multiple&&(h--,!this.$element.find(".bs-title-option").length)){var m=this.$element[0];f.className="bs-title-option";f.innerHTML=this.options.title;f.value="";m.insertBefore(f,m.firstChild);void 0===c(m.options[m.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")&&
(f.selected=!0)}var n=this.$element.find("option");return n.each(function(a){var f=c(this);if(h++,!f.hasClass("bs-title-option")){var k,p=this.className||"",u=g(this.style.cssText),B=f.data("content")?f.data("content"):f.html(),m=f.data("tokens")?f.data("tokens"):null,v="undefined"!=typeof f.data("subtext")?'\x3csmall class\x3d"text-muted"\x3e'+f.data("subtext")+"\x3c/small\x3e":"",D="undefined"!=typeof f.data("icon")?'\x3cspan class\x3d"'+b.options.iconBase+" "+f.data("icon")+'"\x3e\x3c/span\x3e ':
"",t=f.parent(),r="OPTGROUP"===t[0].tagName,I=r&&t[0].disabled,w=this.disabled||I;if(""!==D&&w&&(D="\x3cspan\x3e"+D+"\x3c/span\x3e"),b.options.hideDisabled&&(w&&!r||I))return k=f.data("prevHiddenIndex"),f.next().data("prevHiddenIndex",void 0!==k?k:a),void h--;if(f.data("content")||(B=D+'\x3cspan class\x3d"text"\x3e'+B+v+"\x3c/span\x3e"),r&&!0!==f.data("divider")){if(b.options.hideDisabled&&w&&(void 0===t.data("allOptionsDisabled")&&(k=t.children(),t.data("allOptionsDisabled",k.filter(":disabled").length===
k.length)),t.data("allOptionsDisabled")))return void h--;k=" "+t[0].className||"";0===f.index()&&(e+=1,f=t[0].label,v="undefined"!=typeof t.data("subtext")?'\x3csmall class\x3d"text-muted"\x3e'+t.data("subtext")+"\x3c/small\x3e":"",f=(t.data("icon")?'\x3cspan class\x3d"'+b.options.iconBase+" "+t.data("icon")+'"\x3e\x3c/span\x3e ':"")+'\x3cspan class\x3d"text"\x3e'+g(f)+v+"\x3c/span\x3e",0!==a&&0<d.length&&(h++,d.push(l("",null,"divider",e+"div"))),h++,d.push(l(f,null,"dropdown-header"+k,e)));if(b.options.hideDisabled&&
w)return void h--;d.push(l(q(B,"opt "+p+k,u,m),a,"",e))}else!0===f.data("divider")?d.push(l("",a,"divider")):!0===f.data("hidden")?(k=f.data("prevHiddenIndex"),f.next().data("prevHiddenIndex",void 0!==k?k:a),d.push(l(q(B,p,u,m),a,"hidden is-hidden"))):(t=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName,!t&&b.options.hideDisabled&&(k=f.data("prevHiddenIndex"),void 0!==k)&&(w=n.eq(k)[0].previousElementSibling)&&"OPTGROUP"===w.tagName&&!w.disabled&&(t=!0),t&&(h++,d.push(l("",
null,"divider",e+"div"))),d.push(l(q(B,p,u,m),a)));b.liObj[a]=h}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),d.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(a){var b=this,d=this.$element.find("option");!1!==a&&d.each(function(a){var c=b.findLis().eq(b.liObj[a]);b.setDisabled(a,this.disabled||"OPTGROUP"===this.parentNode.tagName&&
this.parentNode.disabled,c);b.setSelected(a,this.selected,c)});this.togglePlaceholder();this.tabIndex();a=d.map(function(){if(this.selected&&(!b.options.hideDisabled||!(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))){var a,d=c(this),f=d.data("icon")&&b.options.showIcon?'\x3ci class\x3d"'+b.options.iconBase+" "+d.data("icon")+'"\x3e\x3c/i\x3e ':"";return a=b.options.showSubtext&&d.data("subtext")&&!b.multiple?' \x3csmall class\x3d"text-muted"\x3e'+d.data("subtext")+
"\x3c/small\x3e":"","undefined"!=typeof d.attr("title")?d.attr("title"):d.data("content")&&b.options.showContent?d.data("content").toString():f+d.html()+a}}).toArray();var f=this.multiple?a.join(this.options.multipleSeparator):a[0];if(this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")){var e=this.options.selectedTextFormat.split("\x3e");if(1<e.length&&a.length>e[1]||1==e.length&&2<=a.length)f=this.options.hideDisabled?", [disabled]":"",d=d.not('[data-divider\x3d"true"], [data-hidden\x3d"true"]'+
f).length,f=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(a.length,d):this.options.countSelectedText).replace("{0}",a.length.toString()).replace("{1}",d.toString())}void 0==this.options.title&&(this.options.title=this.$element.attr("title"));"static"==this.options.selectedTextFormat&&(f=this.options.title);f||(f="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText);this.$button.attr("title",n(c.trim(f.replace(/<[^>]*>?/g,""))));
this.$button.children(".filter-option").html(f);this.$element.trigger("rendered.bs.select")},setStyle:function(a,c){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));a=a?a:this.options.style;"add"==c?this.$button.addClass(a):"remove"==c?this.$button.removeClass(a):(this.$button.removeClass(this.options.style),this.$button.addClass(a))},liHeight:function(a){if(a||!1!==this.options.size&&!this.sizeInfo){a=
document.createElement("div");var b=document.createElement("div"),d=document.createElement("ul"),f=document.createElement("li"),e=document.createElement("li"),k=document.createElement("a"),h=document.createElement("span"),l=this.options.header&&0<this.$menu.find(".popover-title").length?this.$menu.find(".popover-title")[0].cloneNode(!0):null,g=this.options.liveSearch?document.createElement("div"):null,m=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):
null,q=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(h.className="text",a.className=this.$menu[0].parentNode.className+" open",b.className="dropdown-menu open",d.className="dropdown-menu inner",f.className="divider",h.appendChild(document.createTextNode("Inner text")),k.appendChild(h),e.appendChild(k),d.appendChild(e),d.appendChild(f),l&&b.appendChild(l),g)e=document.createElement("input"),g.className=
"bs-searchbox",e.className="form-control",g.appendChild(e),b.appendChild(g);m&&b.appendChild(m);b.appendChild(d);q&&b.appendChild(q);a.appendChild(b);document.body.appendChild(a);d=k.offsetHeight;l=l?l.offsetHeight:0;g=g?g.offsetHeight:0;m=m?m.offsetHeight:0;q=q?q.offsetHeight:0;f=c(f).outerHeight(!0);e=(k="function"==typeof getComputedStyle&&getComputedStyle(b))?null:c(b);b={vert:parseInt(k?k.paddingTop:e.css("paddingTop"))+parseInt(k?k.paddingBottom:e.css("paddingBottom"))+parseInt(k?k.borderTopWidth:
e.css("borderTopWidth"))+parseInt(k?k.borderBottomWidth:e.css("borderBottomWidth")),horiz:parseInt(k?k.paddingLeft:e.css("paddingLeft"))+parseInt(k?k.paddingRight:e.css("paddingRight"))+parseInt(k?k.borderLeftWidth:e.css("borderLeftWidth"))+parseInt(k?k.borderRightWidth:e.css("borderRightWidth"))};k={vert:b.vert+parseInt(k?k.marginTop:e.css("marginTop"))+parseInt(k?k.marginBottom:e.css("marginBottom"))+2,horiz:b.horiz+parseInt(k?k.marginLeft:e.css("marginLeft"))+parseInt(k?k.marginRight:e.css("marginRight"))+
2};document.body.removeChild(a);this.sizeInfo={liHeight:d,headerHeight:l,searchHeight:g,actionsHeight:m,doneButtonHeight:q,dividerHeight:f,menuPadding:b,menuExtras:k}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var a,b,d,f,e,h,l,g=this,m=this.$menu,q=this.$menuInner,n=c(window),r=this.$newElement[0].offsetHeight,J=this.$newElement[0].offsetWidth,K=this.sizeInfo.liHeight,F=this.sizeInfo.headerHeight,x=this.sizeInfo.searchHeight,
G=this.sizeInfo.actionsHeight,H=this.sizeInfo.doneButtonHeight,C=this.sizeInfo.dividerHeight,E=this.sizeInfo.menuPadding,z=this.sizeInfo.menuExtras,A=this.options.hideDisabled?".disabled":"",L=function(){var a,b=g.$newElement.offset(),d=c(g.options.container);g.options.container&&!d.is("body")?(a=d.offset(),a.top+=parseInt(d.css("borderTopWidth")),a.left+=parseInt(d.css("borderLeftWidth"))):a={top:0,left:0};d=g.options.windowPadding;f=b.top-a.top-n.scrollTop();e=n.height()-f-r-a.top-d[2];h=b.left-
a.left-n.scrollLeft();l=n.width()-h-J-a.left-d[1];f-=d[0];h-=d[3]};if(L(),"auto"===this.options.size)C=function(){var k=function(a,b){return function(d){return b?d.classList?d.classList.contains(a):c(d).hasClass(a):!(d.classList?d.classList.contains(a):c(d).hasClass(a))}};var p=g.$menuInner[0].getElementsByTagName("li");p=Array.prototype.filter?Array.prototype.filter.call(p,k("hidden",!1)):g.$lis.not(".hidden");k=Array.prototype.filter?Array.prototype.filter.call(p,k("dropdown-header",!0)):p.filter(".dropdown-header");
L();y=e-z.vert;a=l-z.horiz;g.options.container?(m.data("height")||m.data("height",m.height()),b=m.data("height"),m.data("width")||m.data("width",m.width()),d=m.data("width")):(b=m.height(),d=m.width());g.options.dropupAuto&&g.$newElement.toggleClass("dropup",f>e&&y-z.vert<b);g.$newElement.hasClass("dropup")&&(y=f-z.vert);"auto"===g.options.dropdownAlignRight&&m.toggleClass("dropdown-menu-right",h>l&&a-z.horiz<d-J);k=3<p.length+k.length?3*K+z.vert-2:0;m.css({"max-height":y+"px",overflow:"hidden","min-height":k+
F+x+G+H+"px"});q.css({"max-height":y-F-x-G-H-E.vert+"px","overflow-y":"auto","min-height":Math.max(k-E.vert,0)+"px"})},C(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",C),n.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",C);else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(A).length>this.options.size){A=this.$lis.not(".divider").not(A).children().slice(0,this.options.size).last().parent().index();A=
this.$lis.slice(0,A+1).filter(".divider").length;var y=K*this.options.size+A*C+E.vert;g.options.container?(m.data("height")||m.data("height",m.height()),b=m.data("height")):b=m.height();g.options.dropupAuto&&this.$newElement.toggleClass("dropup",f>e&&y-z.vert<b);m.css({"max-height":y+F+x+G+H+"px",overflow:"hidden","min-height":""});q.css({"max-height":y-E.vert+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var a=this.$menu.parent().clone().appendTo("body"),
c=this.options.container?this.$newElement.clone().appendTo("body"):a,b=a.children(".dropdown-menu").outerWidth(),d=c.css("width","auto").children("button").outerWidth();a.remove();c.remove();this.$newElement.css("width",Math.max(b,d)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",
""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=c('\x3cdiv class\x3d"bs-container" /\x3e');var a,b,d,f=this,e=c(this.options.container),h=function(c){f.$bsContainer.addClass(c.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",c.hasClass("dropup"));a=c.offset();e.is("body")?b={top:0,left:0}:(b=e.offset(),b.top+=parseInt(e.css("borderTopWidth"))-e.scrollTop(),b.left+=
parseInt(e.css("borderLeftWidth"))-e.scrollLeft());d=c.hasClass("dropup")?0:c[0].offsetHeight;f.$bsContainer.css({top:a.top-b.top+d,left:a.left-b.left,width:c[0].offsetWidth})};this.$button.on("click",function(){var a=c(this);f.isDisabled()||(h(f.$newElement),f.$bsContainer.appendTo(f.options.container).toggleClass("open",!a.hasClass("open")).append(f.$menu))});c(window).on("resize scroll",function(){h(f.$newElement)});this.$element.on("hide.bs.select",function(){f.$menu.data("height",f.$menu.height());
f.$bsContainer.detach()})},setSelected:function(a,c,b){b||(this.togglePlaceholder(),b=this.findLis().eq(this.liObj[a]));b.toggleClass("selected",c).find("a").attr("aria-selected",c)},setDisabled:function(a,c,b){b||(b=this.findLis().eq(this.liObj[a]));c?b.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1).attr("aria-disabled",!0):b.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0).attr("aria-disabled",!1)},isDisabled:function(){return this.$element[0].disabled},
checkDisabled:function(){var a=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled").attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex"));this.$button.click(function(){return!a.isDisabled()})},togglePlaceholder:function(){var a=
this.$element.val();this.$button.toggleClass("bs-placeholder",null===a||""===a||a.constructor===Array&&0===a.length)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")));this.$element.attr("tabindex",-98)},clickListener:function(){var a=this,b=c(document);b.data("spaceSelect",
!1);this.$button.on("keyup",function(a){/(32)/.test(a.keyCode.toString(10))&&b.data("spaceSelect")&&(a.preventDefault(),b.data("spaceSelect",!1))});this.$button.on("click",function(){a.setSize()});this.$element.on("shown.bs.select",function(){if(a.options.liveSearch||a.multiple){if(!a.multiple){var b=a.liObj[a.$element[0].selectedIndex];"number"==typeof b&&!1!==a.options.size&&(b=a.$lis.eq(b)[0].offsetTop-a.$menuInner[0].offsetTop,b=b-a.$menuInner[0].offsetHeight/2+a.sizeInfo.liHeight/2,a.$menuInner[0].scrollTop=
b)}}else a.$menuInner.find(".selected a").focus()});this.$menuInner.on("click","li a",function(b){var d=c(this),e=d.parent().data("originalIndex"),h=a.$element.val(),k=a.$element.prop("selectedIndex"),l=!0;if(a.multiple&&1!==a.options.maxOptions&&b.stopPropagation(),b.preventDefault(),!a.isDisabled()&&!d.parent().hasClass("disabled")){var g=a.$element.find("option");b=g.eq(e);var m=b.prop("selected"),q=b.parent("optgroup"),p=a.options.maxOptions,n=q.data("maxOptions")||!1;if(a.multiple){if(b.prop("selected",
!m),a.setSelected(e,!m),d.blur(),!1!==p||!1!==n){var r=p<g.filter(":selected").length,u=n<q.find("option:selected").length;if(p&&r||n&&u)if(p&&1==p)g.prop("selected",!1),b.prop("selected",!0),a.$menuInner.find(".selected").removeClass("selected"),a.setSelected(e,!0);else if(n&&1==n)q.find("option:selected").prop("selected",!1),b.prop("selected",!0),p=d.parent().data("optgroup"),a.$menuInner.find('[data-optgroup\x3d"'+p+'"]').removeClass("selected"),a.setSelected(e,!0);else{d="string"==typeof a.options.maxOptionsText?
[a.options.maxOptionsText,a.options.maxOptionsText]:a.options.maxOptionsText;d="function"==typeof d?d(p,n):d;g=d[0].replace("{n}",p);q=d[1].replace("{n}",n);var x=c('\x3cdiv class\x3d"notify"\x3e\x3c/div\x3e');d[2]&&(g=g.replace("{var}",d[2][1<p?0:1]),q=q.replace("{var}",d[2][1<n?0:1]));b.prop("selected",!1);a.$menu.append(x);p&&r&&(x.append(c("\x3cdiv\x3e"+g+"\x3c/div\x3e")),l=!1,a.$element.trigger("maxReached.bs.select"));n&&u&&(x.append(c("\x3cdiv\x3e"+q+"\x3c/div\x3e")),l=!1,a.$element.trigger("maxReachedGrp.bs.select"));
setTimeout(function(){a.setSelected(e,!1)},10);x.delay(750).fadeOut(300,function(){c(this).remove()})}}}else g.prop("selected",!1),b.prop("selected",!0),a.$menuInner.find(".selected").removeClass("selected").find("a").attr("aria-selected",!1),a.setSelected(e,!0);!a.multiple||a.multiple&&1===a.options.maxOptions?a.$button.focus():a.options.liveSearch&&a.$searchbox.focus();l&&(h!=a.$element.val()&&a.multiple||k!=a.$element.prop("selectedIndex")&&!a.multiple)&&(f=[e,b.prop("selected"),m],a.$element.triggerNative("change"))}});
this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(b){b.currentTarget==this&&(b.preventDefault(),b.stopPropagation(),a.options.liveSearch&&!c(b.target).hasClass("close")?a.$searchbox.focus():a.$button.focus())});this.$menuInner.on("click",".divider, .dropdown-header",function(b){b.preventDefault();b.stopPropagation();a.options.liveSearch?a.$searchbox.focus():a.$button.focus()});this.$menu.on("click",".popover-title .close",function(){a.$button.click()});this.$searchbox.on("click",
function(a){a.stopPropagation()});this.$menu.on("click",".actions-btn",function(b){a.options.liveSearch?a.$searchbox.focus():a.$button.focus();b.preventDefault();b.stopPropagation();c(this).hasClass("bs-select-all")?a.selectAll():a.deselectAll()});this.$element.change(function(){a.render(!1);a.$element.trigger("changed.bs.select",f);f=null})},liveSearchListener:function(){var b=this,d=c('\x3cli class\x3d"no-results"\x3e\x3c/li\x3e');this.$button.on("click.dropdown.data-api",function(){b.$menuInner.find(".active").removeClass("active");
b.$searchbox.val()&&(b.$searchbox.val(""),b.$lis.not(".is-hidden").removeClass("hidden"),d.parent().length&&d.remove());b.multiple||b.$menuInner.find(".selected").addClass("active");setTimeout(function(){b.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(a){a.stopPropagation()});this.$searchbox.on("input propertychange",function(){if(b.$lis.not(".is-hidden").removeClass("hidden"),b.$lis.filter(".active").removeClass("active"),
d.remove(),b.$searchbox.val()){var f,e=b.$lis.not(".is-hidden, .divider, .dropdown-header");if(f=b.options.liveSearchNormalize?e.not(":a"+b._searchStyle()+'("'+a(b.$searchbox.val())+'")'):e.not(":"+b._searchStyle()+'("'+b.$searchbox.val()+'")'),f.length===e.length)d.html(b.options.noneResultsText.replace("{0}",'"'+g(b.$searchbox.val())+'"')),b.$menuInner.append(d),b.$lis.addClass("hidden");else{f.addClass("hidden");var h,k=b.$lis.not(".hidden");k.each(function(a){var b=c(this);b.hasClass("divider")?
void 0===h?b.addClass("hidden"):(h&&h.addClass("hidden"),h=b):b.hasClass("dropdown-header")&&k.eq(a+1).data("optgroup")!==b.data("optgroup")?b.addClass("hidden"):h=null});h&&h.addClass("hidden");e.not(".hidden").first().addClass("active");b.$menuInner.scrollTop(0)}}})},_searchStyle:function(){return{begins:"ibegins",startsWith:"ibegins"}[this.options.liveSearchStyle]||"icontains"},val:function(a){return"undefined"!=typeof a?(this.$element.val(a),this.render(),this.$element):this.$element.val()},changeAll:function(a){if(this.multiple){"undefined"==
typeof a&&(a=!0);this.findLis();var b=this.$element.find("option"),d=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),f=d.length,e=[];if(a){if(d.filter(".selected").length===d.length)return}else if(0===d.filter(".selected").length)return;d.toggleClass("selected",a);for(var h=0;h<f;h++){var k=d[h].getAttribute("data-original-index");e[e.length]=b.eq(k)[0]}c(e).prop("selected",a);this.render(!1);this.togglePlaceholder();this.$element.triggerNative("change")}},selectAll:function(){return this.changeAll(!0)},
deselectAll:function(){return this.changeAll(!1)},toggle:function(a){(a=a||window.event)&&a.stopPropagation();this.$button.trigger("click")},keydown:function(a){var b,d,f=c(this),e=(f.is("input")?f.parent().parent():f.parent()).data("this"),h={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",
90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(d=e.$newElement.hasClass("open"),!d&&(48<=a.keyCode&&57>=a.keyCode||96<=a.keyCode&&105>=a.keyCode||65<=a.keyCode&&90>=a.keyCode))return e.options.container?e.$button.trigger("click"):(e.setSize(),e.$menu.parent().addClass("open"),d=!0),void e.$searchbox.focus();if(e.options.liveSearch&&/(^9$|27)/.test(a.keyCode.toString(10))&&d&&(a.preventDefault(),a.stopPropagation(),e.$menuInner.click(),e.$button.focus()),/(38|40)/.test(a.keyCode.toString(10))){if(b=
e.$lis.filter(":not(.disabled, .hidden, .dropdown-header, .divider)"),!b.length)return;var l=e.options.liveSearch?b.index(b.filter(".active")):b.index(b.find("a").filter(":focus").parent());var g=e.$menuInner.data("prevIndex");38==a.keyCode?(!e.options.liveSearch&&l!=g||-1==l||l--,0>l&&(l+=b.length)):40==a.keyCode&&((e.options.liveSearch||l==g)&&l++,l%=b.length);e.$menuInner.data("prevIndex",l);e.options.liveSearch?(a.preventDefault(),f.hasClass("dropdown-toggle")||(b.removeClass("active").eq(l).addClass("active").children("a").focus(),
f.focus())):b.eq(l).children("a").focus()}else if(!f.is("input")){var k=[];b=e.$lis.filter(":not(.disabled, .hidden, .dropdown-header, .divider)");b.each(function(b){c.trim(c(this).children("a").text().toLowerCase()).substring(0,1)==h[a.keyCode]&&k.push(b)});l=c(document).data("keycount");l++;c(document).data("keycount",l);c.trim(c(":focus").text().toLowerCase()).substring(0,1)!=h[a.keyCode]?(l=1,c(document).data("keycount",l)):l>=k.length&&(c(document).data("keycount",0),l>k.length&&(l=1));b.eq(k[l-
1]).children("a").focus()}(/(13|32)/.test(a.keyCode.toString(10))||/(^9$)/.test(a.keyCode.toString(10))&&e.options.selectOnTab)&&d&&((/(32)/.test(a.keyCode.toString(10))||a.preventDefault(),e.options.liveSearch)?/(32)/.test(a.keyCode.toString(10))||(e.$menuInner.find(".active a").click(),f.focus()):(b=c(":focus"),b.click(),b.focus(),a.preventDefault(),c(document).data("spaceSelect",!0)),c(document).data("keycount",0));(/(^9$|27)/.test(a.keyCode.toString(10))&&d&&(e.multiple||e.options.liveSearch)||
/(27)/.test(a.keyCode.toString(10))&&!d)&&(e.$menu.parent().removeClass("open"),e.options.container&&e.$newElement.removeClass("open"),e.$button.focus())},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null;this.liObj={};this.reloadLi();this.render();this.checkDisabled();this.liHeight(!0);this.setStyle();this.setWidth();this.$lis&&this.$searchbox.trigger("propertychange");this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},
show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove();this.$bsContainer?this.$bsContainer.remove():this.$menu.remove();this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var r=c.fn.selectpicker;c.fn.selectpicker=b;c.fn.selectpicker.Constructor=m;c.fn.selectpicker.noConflict=function(){return c.fn.selectpicker=r,this};c(document).data("keycount",
0).on("keydown.bs.select",'.bootstrap-select [data-toggle\x3ddropdown], .bootstrap-select [role\x3d"listbox"], .bs-searchbox input',m.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle\x3ddropdown], .bootstrap-select [role\x3d"listbox"], .bs-searchbox input',function(a){a.stopPropagation()});c(window).on("load.bs.select.data-api",function(){c(".selectpicker").each(function(){var a=c(this);b.call(a,a.data())})})}(c)});
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?c(require("jquery")):c(jQuery)})(function(c){var g=0,a=Array.prototype.slice;c.cleanData=function(a){return function(b){var d,f,h;for(h=0;null!=(f=b[h]);h++)try{(d=c._data(f,"events"))&&d.remove&&c(f).triggerHandler("remove")}catch(l){}a(b)}}(c.cleanData);c.widget=function(a,d,e){var b={},h=a.split(".")[0];a=a.split(".")[1];var l=h+"-"+a;e||(e=d,d=c.Widget);c.expr[":"][l.toLowerCase()]=function(a){return!!c.data(a,
l)};c[h]=c[h]||{};var g=c[h][a];var n=c[h][a]=function(a,b){if(!this._createWidget)return new n(a,b);arguments.length&&this._createWidget(a,b)};c.extend(n,g,{version:e.version,_proto:c.extend({},e),_childConstructors:[]});var m=new d;m.options=c.widget.extend({},m.options);c.each(e,function(a,e){c.isFunction(e)?b[a]=function(){var b=function(){return d.prototype[a].apply(this,arguments)},c=function(b){return d.prototype[a].apply(this,b)};return function(){var a=this._super,d=this._superApply;this._super=
b;this._superApply=c;var f=e.apply(this,arguments);this._super=a;this._superApply=d;return f}}():b[a]=e});n.prototype=c.widget.extend(m,{widgetEventPrefix:g?m.widgetEventPrefix||a:a},b,{constructor:n,namespace:h,widgetName:a,widgetFullName:l});g?(c.each(g._childConstructors,function(a,b){a=b.prototype;c.widget(a.namespace+"."+a.widgetName,n,b._proto)}),delete g._childConstructors):d._childConstructors.push(n);c.widget.bridge(a,n);return n};c.widget.extend=function(b){for(var d=a.call(arguments,1),
e=0,f=d.length,h,l;e<f;e++)for(h in d[e])l=d[e][h],d[e].hasOwnProperty(h)&&void 0!==l&&(c.isPlainObject(l)?b[h]=c.isPlainObject(b[h])?c.widget.extend({},b[h],l):c.widget.extend({},l):b[h]=l);return b};c.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;c.fn[b]=function(f){var h="string"===typeof f,l=a.call(arguments,1),g=this;h?this.each(function(){var a=c.data(this,e);if("instance"===f)return g=a,!1;if(!a)return c.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+
f+"'");if(!c.isFunction(a[f])||"_"===f.charAt(0))return c.error("no such method '"+f+"' for "+b+" widget instance");var d=a[f].apply(a,l);if(d!==a&&void 0!==d)return g=d&&d.jquery?g.pushStack(d.get()):d,!1}):(l.length&&(f=c.widget.extend.apply(null,[f].concat(l))),this.each(function(){var a=c.data(this,e);a?(a.option(f||{}),a._init&&a._init()):c.data(this,e,new d(f,this))}));return g}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",
defaultElement:"\x3cdiv\x3e",options:{disabled:!1,create:null},_createWidget:function(a,d){d=c(d||this.defaultElement||this)[0];this.element=c(d);this.uuid=g++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();d!==this&&(c.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=c(d.style?d.ownerDocument:d.document||d),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));
this.options=c.widget.extend({},this.options,this._getCreateOptions(),a);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");
this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(a,d){var b=a,f;if(0===arguments.length)return c.widget.extend({},this.options);if("string"===typeof a){b={};var h=a.split(".");a=h.shift();if(h.length){var l=b[a]=c.widget.extend({},this.options[a]);for(f=0;f<h.length-1;f++)l[h[f]]=l[h[f]]||{},l=l[h[f]];a=h.pop();if(1===arguments.length)return void 0===
l[a]?null:l[a];l[a]=d}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];b[a]=d}}this._setOptions(b);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,c){this.options[a]=c;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!c),c&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(a,d,e){var b,h=this;"boolean"!==typeof a&&(e=d,d=a,a=!1);e?(d=b=c(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,b=this.widget());c.each(e,function(e,f){function l(){if(a||!0!==h.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"===typeof f?h[f]:f).apply(h,arguments)}"string"!==typeof f&&(l.guid=f.guid=f.guid||l.guid||c.guid++);var g=e.match(/^([\w:-]*)\s*(.*)$/);e=g[1]+h.eventNamespace;(g=g[2])?
b.delegate(g,e,l):d.bind(e,l)})},_off:function(a,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(d).undelegate(d);this.bindings=c(this.bindings.not(a).get());this.focusable=c(this.focusable.not(a).get());this.hoverable=c(this.hoverable.not(a).get())},_delay:function(a,c){var b=this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},c||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){c(a.currentTarget).addClass("ui-state-hover")},
mouseleave:function(a){c(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){c(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){c(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,d,e){var b,h=this.options[a];e=e||{};d=c.Event(d);d.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d.target=this.element[0];if(a=d.originalEvent)for(b in a)b in d||
(d[b]=a[b]);this.element.trigger(d,e);return!(c.isFunction(h)&&!1===h.apply(this.element[0],[d].concat(e))||d.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(a,d){c.Widget.prototype["_"+a]=function(b,f,h){"string"===typeof f&&(f={effect:f});var e=f?!0===f||"number"===typeof f?d:f.effect||d:a;f=f||{};"number"===typeof f&&(f={duration:f});var g=!c.isEmptyObject(f);f.complete=h;f.delay&&b.delay(f.delay);if(g&&c.effects&&c.effects.effect[e])b[a](f);else if(e!==a&&b[e])b[e](f.duration,
f.easing,h);else b.queue(function(d){c(this)[a]();h&&h.call(b[0]);d()})}})});
!function(c){var g=function(a,b){var c=/[^\w\-.:]/.test(a)?new Function(g.arg+",tmpl","var _e\x3dtmpl.encode"+g.helper+",_s\x3d'"+a.replace(g.regexp,g.func)+"';return _s;"):g.cache[a]=g.cache[a]||g(g.load(a));return b?c(b,g):function(a){return c(a,g)}};g.cache={};g.load=function(a){return document.getElementById(a).innerHTML};g.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;g.func=function(a,b,c,e,f,h){return b?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[b]||"\\"+
b:c?"\x3d"===c?"'+_e("+e+")+'":"'+("+e+"\x3d\x3dnull?'':"+e+")+'":f?"';":h?"_s+\x3d'":void 0};g.encReg=/[<>&"'\x00]/g;g.encMap={"\x3c":"\x26lt;","\x3e":"\x26gt;","\x26":"\x26amp;",'"':"\x26quot;","'":"\x26#39;"};g.encode=function(a){return(null==a?"":""+a).replace(g.encReg,function(a){return g.encMap[a]||""})};g.arg="o";g.helper=",print\x3dfunction(s,e){_s+\x3de?(s\x3d\x3dnull?'':s):_e(s);},include\x3dfunction(s,d){_s+\x3dtmpl(s,d);}";"function"==typeof define&&define.amd?define(function(){return g}):
"object"==typeof module&&module.exports?module.exports=g:c.tmpl=g}(this);
!function(c){var g=c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype,a;if(a=c.Blob)try{a=!!new Blob}catch(l){a=!1}var b=a;if(a=b&&c.Uint8Array)try{a=100===(new Blob([new Uint8Array(100)])).size}catch(l){a=!1}var d=a,e=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||c.MSBlobBuilder,f=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,h=(b||e)&&c.atob&&c.ArrayBuffer&&c.Uint8Array&&function(a){var c,h,l;if(!(c=a.match(f)))throw Error("invalid data URI");var g=c[2]?c[1]:"text/plain"+(c[3]||";charset\x3dUS-ASCII");
var k=!!c[4];a=a.slice(c[0].length);k=k?atob(a):decodeURIComponent(a);a=new ArrayBuffer(k.length);c=new Uint8Array(a);for(h=0;h<k.length;h+=1)c[h]=k.charCodeAt(h);return b?new Blob([d?c:a],{type:g}):((l=new e).append(a),l.getBlob(g))};c.HTMLCanvasElement&&!g.toBlob&&(g.mozGetAsFile?g.toBlob=function(a,b,c){var d=this;setTimeout(function(){a(c&&g.toDataURL&&h?h(d.toDataURL(b,c)):d.mozGetAsFile("blob",b))})}:g.toDataURL&&h&&(g.toBlob=function(a,b,c){var d=this;setTimeout(function(){a(h(d.toDataURL(b,
c)))})}));"function"==typeof define&&define.amd?define(function(){return h}):"object"==typeof module&&module.exports?module.exports=h:c.dataURLtoBlob=h}(window);
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?c(require("jquery")):c(window.jQuery)})(function(c){var g=0,a=c,b="parseJSON";"JSON"in window&&"parse"in JSON&&(a=JSON,b="parse");c.ajaxTransport("iframe",function(a){if(a.async){var b=a.initialIframeSrc||"javascript:false;",d,h,l;return{send:function(e,f){d=c('\x3cform style\x3d"display:none;"\x3e\x3c/form\x3e');d.attr("accept-charset",a.formAcceptCharset);l=/\?/.test(a.url)?"\x26":"?";"DELETE"===a.type?
(a.url=a.url+l+"_method\x3dDELETE",a.type="POST"):"PUT"===a.type?(a.url=a.url+l+"_method\x3dPUT",a.type="POST"):"PATCH"===a.type&&(a.url=a.url+l+"_method\x3dPATCH",a.type="POST");g+=1;h=c('\x3ciframe src\x3d"'+b+'" name\x3d"iframe-transport-'+g+'"\x3e\x3c/iframe\x3e').bind("load",function(){var e=c.isArray(a.paramName)?a.paramName:[a.paramName];h.unbind("load").bind("load",function(){try{var a=h.contents();if(!a.length||!a[0].firstChild)throw Error();}catch(p){a=void 0}f(200,"success",{iframe:a});
c('\x3ciframe src\x3d"'+b+'"\x3e\x3c/iframe\x3e').appendTo(d);window.setTimeout(function(){d.remove()},0)});d.prop("target",h.prop("name")).prop("action",a.url).prop("method",a.type);a.formData&&c.each(a.formData,function(a,b){c('\x3cinput type\x3d"hidden"/\x3e').prop("name",b.name).val(b.value).appendTo(d)});if(a.fileInput&&a.fileInput.length&&"POST"===a.type){var g=a.fileInput.clone();a.fileInput.after(function(a){return g[a]});a.paramName&&a.fileInput.each(function(b){c(this).prop("name",e[b]||
a.paramName)});d.append(a.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");a.fileInput.removeAttr("form")}d.submit();g&&g.length&&a.fileInput.each(function(a,b){a=c(g[a]);c(b).prop("name",a.prop("name")).attr("form",a.attr("form"));a.replaceWith(b)})});d.append(h).appendTo(document.body)},abort:function(){h&&h.unbind("load").prop("src",b);d&&d.remove()}}}});c.ajaxSetup({converters:{"iframe text":function(a){return a&&c(a[0].body).text()},"iframe json":function(d){return d&&
a[b](c(d[0].body).text())},"iframe html":function(a){return a&&c(a[0].body).html()},"iframe xml":function(a){return(a=a&&a[0])&&c.isXMLDoc(a)?a:c.parseXML(a.XMLDocument&&a.XMLDocument.xml||c(a.body).html())},"iframe script":function(a){return a&&c.globalEval(c(a[0].body).text())}}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget"],c):"object"===typeof exports?c(require("jquery"),require("./vendor/jquery.ui.widget")):c(window.jQuery)})(function(c){function g(a){var b="dragover"===a;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var e=d.dataTransfer;e&&-1!==c.inArray("Files",e.types)&&!1!==this._trigger(a,c.Event(a,{delegatedEvent:d}))&&(d.preventDefault(),b&&(e.dropEffect="copy"))}}c.support.fileInput=
!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||c('\x3cinput type\x3d"file"\x3e').prop("disabled"));c.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;c.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);c.widget("blueimp.fileupload",{options:{dropZone:c(document),
pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},
i18n:function(a,b){a=this.messages[a]||a.toString();b&&c.each(b,function(b,c){a=a.replace("{"+b+"}",c)});return a},formData:function(a){return a.serializeArray()},add:function(a,b){if(a.isDefaultPrevented())return!1;(b.autoUpload||!1!==b.autoUpload&&c(this).fileupload("option","autoUpload"))&&b.process().done(function(){b.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:c.support.blobSlice&&
function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=this.loaded=0;this.getBitrate=function(a,b,c){var d=a-this.timestamp;if(!this.bitrate||!c||d>c)this.bitrate=1E3/d*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&(!a.multipart&&c.support.xhrFileUpload||c.support.xhrFormDataFileUpload)},_getFormData:function(a){if("function"===
c.type(a.formData))return a.formData(a.form);if(c.isArray(a.formData))return a.formData;if("object"===c.type(a.formData)){var b=[];c.each(a.formData,function(a,c){b.push({name:a,value:c})});return b}return[]},_getTotal:function(a){var b=0;c.each(a,function(a,c){b+=c.size||1});return b},_initProgressObject:function(a){var b={loaded:0,total:0,bitrate:0};a._progress?c.extend(a._progress,b):a._progress=b},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&
delete a._response[b];else a._response={}},_onProgress:function(a,b){if(a.lengthComputable){var d=Date.now?Date.now():(new Date).getTime();if(!(b._time&&b.progressInterval&&d-b._time<b.progressInterval&&a.loaded!==a.total)){b._time=d;var e=Math.floor(a.loaded/a.total*(b.chunkSize||b._progress.total))+(b.uploadedBytes||0);this._progress.loaded+=e-b._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,b.bitrateInterval);b._progress.loaded=b.loaded=e;b._progress.bitrate=
b.bitrate=b._bitrateTimer.getBitrate(d,e,b.bitrateInterval);this._trigger("progress",c.Event("progress",{delegatedEvent:a}),b);this._trigger("progressall",c.Event("progressall",{delegatedEvent:a}),this._progress)}}},_initProgressListener:function(a){var b=this,d=a.xhr?a.xhr():c.ajaxSettings.xhr();d.upload&&(c(d.upload).bind("progress",function(c){var d=c.originalEvent;c.lengthComputable=d.lengthComputable;c.loaded=d.loaded;c.total=d.total;b._onProgress(c,a)}),a.xhr=function(){return d})},_isInstanceOf:function(a,
b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(a){var b=this,d=a.files[0],e=a.multipart||!c.support.xhrFileUpload,f="array"===c.type(a.paramName)?a.paramName[0]:a.paramName;a.headers=c.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);e&&!a.blob&&this._isInstanceOf("File",d)||(a.headers["Content-Disposition"]='attachment; filename\x3d"'+encodeURI(d.name)+'"');if(!e)a.contentType=d.type||"application/octet-stream",a.data=a.blob||
d;else if(c.support.xhrFormDataFileUpload){if(a.postMessage){var h=this._getFormData(a);a.blob?h.push({name:f,value:a.blob}):c.each(a.files,function(b,d){h.push({name:"array"===c.type(a.paramName)&&a.paramName[b]||f,value:d})})}else b._isInstanceOf("FormData",a.formData)?h=a.formData:(h=new FormData,c.each(this._getFormData(a),function(a,b){h.append(b.name,b.value)})),a.blob?h.append(f,a.blob,d.name):c.each(a.files,function(d,e){(b._isInstanceOf("File",e)||b._isInstanceOf("Blob",e))&&h.append("array"===
c.type(a.paramName)&&a.paramName[d]||f,e,e.uploadName||e.name)});a.data=h}a.blob=null},_initIframeSettings:function(a){var b=c("\x3ca\x3e\x3c/a\x3e").prop("href",a.url).prop("host");a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&b&&b!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&
(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var b=c(a.fileInput),d=a.paramName;d?c.isArray(d)||(d=[d]):(d=[],b.each(function(){var a=c(this),b=a.prop("name")||"files[]";for(a=(a.prop("files")||[1]).length;a;)d.push(b),--a}),d.length||(d=[b.prop("name")||"files[]"]));return d},_initFormSettings:function(a){a.form&&a.form.length||(a.form=c(a.fileInput.prop("form")),a.form.length||(a.form=c(this.options.fileInput.prop("form"))));a.paramName=this._getParamName(a);
a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||"string"===c.type(a.form.prop("method"))&&a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==a.type&&"PATCH"!==a.type&&(a.type="POST");a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=c.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?
"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,b,d){var e=c.Deferred(),f=e.promise();b=b||this.options.context||f;!0===a?e.resolveWith(b,d):!1===a&&e.rejectWith(b,d);f.abort=e.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(a,b){var d=this,e=function(a){return c.Deferred().resolveWith(d,a).promise()};b.process=function(a,h){if(a||h)b._processQueue=this._processQueue=(this._processQueue||
e([this])).then(function(){return b.errorThrown?c.Deferred().rejectWith(d,[b]).promise():e(arguments)}).then(a,h);return this._processQueue||e([this])};b.submit=function(){"pending"!==this.state()&&(b.jqXHR=this.jqXHR=!1!==d._trigger("submit",c.Event("submit",{delegatedEvent:a}),this)&&d._onSend(a,this));return this.jqXHR||d._getXHRPromise()};b.abort=function(){if(this.jqXHR)return this.jqXHR.abort();this.errorThrown="abort";d._trigger("fail",null,this);return d._getXHRPromise(!1)};b.state=function(){if(this.jqXHR)return d._getDeferredState(this.jqXHR);
if(this._processQueue)return d._getDeferredState(this._processQueue)};b.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)};b.progress=function(){return this._progress};b.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(a,b){a.uploadedBytes=a.uploadedBytes||0;var d=this,e=a.files[0],f=e.size,
h=a.uploadedBytes,g=a.maxChunkSize||f,q=this._blobSlice,n=c.Deferred(),m=n.promise(),r;if(!(this._isXHRUpload(a)&&q&&(h||("function"===c.type(g)?g(a):g)<f))||a.data)return!1;if(b)return!0;if(h>=f)return e.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",e.error]);var k=function(){var b=c.extend({},a),l=b._progress.loaded;b.blob=q.call(e,h,h+("function"===c.type(g)?g(b):g),e.type);b.chunkSize=b.blob.size;b.contentRange="bytes "+h+"-"+(h+b.chunkSize-1)+"/"+f;d._initXHRData(b);
d._initProgressListener(b);r=(!1!==d._trigger("chunksend",null,b)&&c.ajax(b)||d._getXHRPromise(!1,b.context)).done(function(e,g,m){h=d._getUploadedBytes(m)||h+b.chunkSize;l+b.chunkSize-b._progress.loaded&&d._onProgress(c.Event("progress",{lengthComputable:!0,loaded:h-b.uploadedBytes,total:h-b.uploadedBytes}),b);a.uploadedBytes=b.uploadedBytes=h;b.result=e;b.textStatus=g;b.jqXHR=m;d._trigger("chunkdone",null,b);d._trigger("chunkalways",null,b);h<f?k():n.resolveWith(b.context,[e,g,m])}).fail(function(a,
c,e){b.jqXHR=a;b.textStatus=c;b.errorThrown=e;d._trigger("chunkfail",null,b);d._trigger("chunkalways",null,b);n.rejectWith(b.context,[a,c,e])})};this._enhancePromise(m);m.abort=function(){return r.abort()};k();return m},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||
0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,b,d,e){var f=e._progress.total,h=e._response;e._progress.loaded<f&&this._onProgress(c.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e);h.result=e.result=a;h.textStatus=e.textStatus=b;h.jqXHR=e.jqXHR=d;this._trigger("done",null,e)},_onFail:function(a,b,c,e){var d=e._response;e.recalculateProgress&&(this._progress.loaded-=
e._progress.loaded,this._progress.total-=e._progress.total);d.jqXHR=e.jqXHR=a;d.textStatus=e.textStatus=b;d.errorThrown=e.errorThrown=c;this._trigger("fail",null,e)},_onAlways:function(a,b,c,e){this._trigger("always",null,e)},_onSend:function(a,b){b.submit||this._addConvenienceMethods(a,b);var d=this,e,f,h=d._getAJAXSettings(b),g=function(){d._sending+=1;h._bitrateTimer=new d._BitrateTimer;return e=e||((f||!1===d._trigger("send",c.Event("send",{delegatedEvent:a}),h))&&d._getXHRPromise(!1,h.context,
f)||d._chunkedUpload(h)||c.ajax(h)).done(function(a,b,c){d._onDone(a,b,c,h)}).fail(function(a,b,c){d._onFail(a,b,c,h)}).always(function(a,b,c){d._onAlways(a,b,c,h);--d._sending;--d._active;if(h.limitConcurrentUploads&&h.limitConcurrentUploads>d._sending)for(a=d._slots.shift();a;){if("pending"===d._getDeferredState(a)){a.resolve();break}a=d._slots.shift()}0===d._active&&d._trigger("stop")})};this._beforeSend(a,h);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=
this._sending){if(1<this.options.limitConcurrentUploads){var q=c.Deferred();this._slots.push(q);b=q.then(g)}else b=this._sequence=this._sequence.then(g,g);b.abort=function(){f=[void 0,"abort","abort"];return e?e.abort():(q&&q.rejectWith(h.context,f),g())};return this._enhancePromise(b)}return g()},_onAdd:function(a,b){var d=this,e=!0,f=c.extend({},this.options,b),h=b.files,g=h.length,q=f.limitMultiFileUploads,n=f.limitMultiFileUploadSize,m=f.limitMultiFileUploadSizeOverhead,r=0,k=this._getParamName(f),
p=0;if(!g)return!1;n&&void 0===h[0].size&&(n=void 0);if((f.singleFileUploads||q||n)&&this._isXHRUpload(f))if(f.singleFileUploads||n||!q)if(!f.singleFileUploads&&n){var u=[];var v=[];for(f=0;f<g;f+=1)if(r+=h[f].size+m,f+1===g||r+h[f+1].size+m>n||q&&f+1-p>=q)u.push(h.slice(p,f+1)),r=k.slice(p,f+1),r.length||(r=k),v.push(r),p=f+1,r=0}else v=k;else for(u=[],v=[],f=0;f<g;f+=q)u.push(h.slice(f,f+q)),r=k.slice(f,f+q),r.length||(r=k),v.push(r);else u=[h],v=[k];b.originalFiles=h;c.each(u||h,function(f,h){var g=
c.extend({},b);g.files=u?h:[h];g.paramName=v[f];d._initResponseObject(g);d._initProgressObject(g);d._addConvenienceMethods(a,g);return e=d._trigger("add",c.Event("add",{delegatedEvent:a}),g)});return e},_replaceFileInput:function(a){var b=a.fileInput,d=b.clone(!0),e=b.is(document.activeElement);a.fileInputClone=d;c("\x3cform\x3e\x3c/form\x3e").append(d)[0].reset();b.after(d).detach();e&&d.focus();c.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(a,c){return c===
b[0]?d[0]:c});b[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(a,b){var d=this,e=c.Deferred(),f=[],h=function(b){b&&!b.entry&&(b.entry=a);e.resolve([b])},g=function(c){d._handleFileTreeEntries(c,b+a.name+"/").done(function(a){e.resolve(a)}).fail(h)},q=function(){n.readEntries(function(a){a.length?(f=f.concat(a),q()):g(f)},h)};b=b||"";if(a.isFile)a._file?(a._file.relativePath=b,e.resolve(a._file)):a.file(function(a){a.relativePath=b;e.resolve(a)},h);else if(a.isDirectory){var n=
a.createReader();q()}else e.resolve([]);return e.promise()},_handleFileTreeEntries:function(a,b){var d=this;return c.when.apply(c,c.map(a,function(a){return d._handleFileTreeEntry(a,b)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(a){a=a||{};var b=a.items;return b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)?this._handleFileTreeEntries(c.map(b,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):
c.Deferred().resolve(c.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=c(a);var b=a.prop("webkitEntries")||a.prop("entries");if(b&&b.length)return this._handleFileTreeEntries(b);b=c.makeArray(a.prop("files"));if(b.length)void 0===b[0].name&&b[0].fileName&&c.each(b,function(a,b){b.name=b.fileName;b.size=b.fileSize});else{a=a.prop("value");if(!a)return c.Deferred().resolve([]).promise();b=[{name:a.replace(/^.*\\/,"")}]}return c.Deferred().resolve(b).promise()},_getFileInputFiles:function(a){return a instanceof
c&&1!==a.length?c.when.apply(c,c.map(a,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var b=this,d={fileInput:c(a.target),form:c(a.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;b.options.replaceFileInput&&b._replaceFileInput(d);!1!==b._trigger("change",c.Event("change",{delegatedEvent:a}),d)&&b._onAdd(a,d)})},_onPaste:function(a){var b=a.originalEvent&&a.originalEvent.clipboardData&&
a.originalEvent.clipboardData.items,d={files:[]};b&&b.length&&(c.each(b,function(a,b){(a=b.getAsFile&&b.getAsFile())&&d.files.push(a)}),!1!==this._trigger("paste",c.Event("paste",{delegatedEvent:a}),d)&&this._onAdd(a,d))},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=this,d=a.dataTransfer,e={};d&&d.files&&d.files.length&&(a.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d;!1!==b._trigger("drop",c.Event("drop",{delegatedEvent:a}),e)&&b._onAdd(a,
e)}))},_onDragOver:g("dragover"),_onDragEnter:g("dragenter"),_onDragLeave:g("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));c.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");
this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(a,b){var d=-1!==c.inArray(a,this._specialOptions);d&&this._destroyEventHandlers();this._super(a,b);d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type\x3d"file"]')?this.element:this.element.find('input[type\x3d"file"]'):a.fileInput instanceof
c||(a.fileInput=c(a.fileInput));a.dropZone instanceof c||(a.dropZone=c(a.dropZone));a.pasteZone instanceof c||(a.pasteZone=c(a.pasteZone))},_getRegExp:function(a){a=a.split("/");var b=a.pop();a.shift();return new RegExp(a.join("/"),b)},_isRegExpOption:function(a,b){return"url"!==a&&"string"===c.type(b)&&/^\/.*\/[igm]{0,3}$/.test(b)},_initDataAttributes:function(){var a=this,b=this.options,d=this.element.data();c.each(this.element[0].attributes,function(c,f){c=f.name.toLowerCase();/^data-/.test(c)&&
(c=c.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()}),f=d[c],a._isRegExpOption(c,f)&&(f=a._getRegExp(f)),b[c]=f)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var b=this;a&&!this.options.disabled&&(a.fileInput&&
!a.files?this._getFileInputFiles(a.fileInput).always(function(c){a.files=c;b._onAdd(null,a)}):(a.files=c.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&!a.files){var b=this,d=c.Deferred(),e=d.promise(),f,h;e.abort=function(){h=!0;if(f)return f.abort();d.reject(null,"abort","abort");return e};this._getFileInputFiles(a.fileInput).always(function(c){h||(c.length?(a.files=c,f=b._onSend(null,a),f.then(function(a,b,c){d.resolve(a,b,c)},function(a,
b,c){d.reject(a,b,c)})):d.reject())});return this._enhancePromise(e)}a.files=c.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload"],c):"object"===typeof exports?c(require("jquery"),require("./jquery.fileupload")):c(window.jQuery)})(function(c){var g=c.blueimp.fileupload.prototype.options.add;c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{processQueue:[],add:function(a,b){var d=c(this);b.process(function(){return d.fileupload("process",b)});g.call(this,a,b)}},processActions:{},_processFile:function(a,b){var d=this,e=c.Deferred().resolveWith(d,
[a]).promise();this._trigger("process",null,a);c.each(a.processQueue,function(a,h){a=function(a){return b.errorThrown?c.Deferred().rejectWith(d,[b]).promise():d.processActions[h.action].call(d,a,h)};e=e.then(a,h.always&&a)});e.done(function(){d._trigger("processdone",null,a);d._trigger("processalways",null,a)}).fail(function(){d._trigger("processfail",null,a);d._trigger("processalways",null,a)});return e},_transformProcessQueue:function(a){var b=[];c.each(a.processQueue,function(){var d={},e=this.action,
f=!0===this.prefix?e:this.prefix;c.each(this,function(b,e){"string"===c.type(e)&&"@"===e.charAt(0)?d[b]=a[e.slice(1)||(f?f+b.charAt(0).toUpperCase()+b.slice(1):b)]:d[b]=e});b.push(d)});a.processQueue=b},processing:function(){return this._processing},process:function(a){var b=this,d=c.extend({},this.options,a);d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),c.each(a.files,function(e){var f=e?c.extend({},d):d,h=function(){return a.errorThrown?
c.Deferred().rejectWith(b,[a]).promise():b._processFile(f,a)};f.index=e;b._processing+=1;b._processingQueue=b._processingQueue.then(h,h).always(function(){--b._processing;0===b._processing&&b._trigger("processstop")})}));return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=c.Deferred().resolveWith(this).promise()}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],c):"object"===typeof exports?c(require("jquery"),require("./jquery.fileupload-process")):c(window.jQuery)})(function(c){c.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{getNumberOfFiles:c.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",
acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(g,a){if(a.disabled)return g;var b=c.Deferred(),d=this.options,e=g.files[g.index];if(a.minFileSize||a.maxFileSize)var f=e.size;"number"===c.type(a.maxNumberOfFiles)&&(d.getNumberOfFiles()||0)+g.files.length>a.maxNumberOfFiles?e.error=d.i18n("maxNumberOfFiles"):!a.acceptFileTypes||a.acceptFileTypes.test(e.type)||a.acceptFileTypes.test(e.name)?f>a.maxFileSize?e.error=
d.i18n("maxFileSize"):"number"===c.type(f)&&f<a.minFileSize?e.error=d.i18n("minFileSize"):delete e.error:e.error=d.i18n("acceptFileTypes");e.error||g.files.error?(g.files.error=!0,b.rejectWith(this,[g])):b.resolveWith(this,[g]);return b.promise()}}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery","blueimp-tmpl","./jquery.fileupload-validate"],c):"object"===typeof exports?c(require("jquery"),require("blueimp-tmpl"),require("./jquery.fileupload-validate")):c(window.jQuery,window.tmpl)})(function(c,g){c.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{canUploadCheckTimeout:1E3,statusCheckTimeout:2E3,autoUpload:!1,
uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!0,dataType:"json",messages:{unknownError:"Unknown error"},steps:{ready:"ready",downloading:"downloading",received:"received",working:"working",converted:"converted",uploading:"uploading",uploaded:"uploaded",error:"error"},checkStatusUUIDS:{},UUIDSdata:{},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){return a.result&&
c.isArray(a.result.files)?a.result.files:[]},add:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this),e=d.data("blueimp-fileupload")||d.data("fileupload"),f=e.options;b.context=e._renderUpload(b.files).data("data",b).addClass("processing");f.filesContainer[f.prependFiles?"prepend":"append"](b.context);e._forceReflow(b.context);e._transition(b.context);b.process(function(){return d.fileupload("process",b)}).always(function(){b.context.each(function(a){c(this).find(".size").text(e._formatFileSize(b.files[a].size));
c(this).find(".status p").html(lang.ready);c(this).find("li:contains('"+b.files[a].ext+"')").remove();var d=c(this).find(".dropdown.format button span").text();d=c.trim(d);d==b.files[a].ext&&(a=c(this).find(".dropdown.format li:first-child a").text(),c(this).find(".dropdown.format button span:first-child").text(a))}).removeClass("processing");e._renderPreviews(b)}).done(function(){b.context.find(".start").prop("disabled",!1);!1!==e._trigger("added",a,b)&&(f.autoUpload||b.autoUpload)&&!1!==b.autoUpload&&
b.submit()}).fail(function(){b.files.error&&b.context.each(function(a){(a=b.files[a].error)&&c(this).find(".error").text(a)})});d.find(".fileupload-buttonbar .start").prop("disabled",!1)},send:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b.context&&b.dataType&&"iframe"===b.dataType.substr(0,6)&&b.context.find(".progress").addClass(!c.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width",
"100%");b.headers.type=c("#toolType").val();b.headers.format=b.context.find(".dropdown button span:first-child").html();b.headers.filename=b.files[0].name;return d._trigger("sent",a,b)},done:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=(b.getFilesFromResponse||d.options.getFilesFromResponse)(b),f,h;b.context?b.context.each(function(e){var g=b.result||{error:"Empty file upload result"};d._addToCheckStatusIfNeed(g)?(c(this).find("input[name\x3d'uuid']").val(g.uuid),
d.options.UUIDSdata[g.uuid]=g,d._updateUploadItem(c(this),g)):(h=d._addFinishedDeferreds(),d._transition(c(this)).done(function(){var e=c(this);f=d._renderDownload([g]).replaceAll(e);f.find(".filename .size").text(d._formatFileSize(g.size));f.find(".new_filename .size").text(d._formatFileSize(g.new_size));d._updateDownloadItem(f,g);d._forceReflow(f);d._transition(f).done(function(){b.context=c(this);d._trigger("completed",a,b);d._trigger("finished",a,b);h.resolve()})}))}):e.forEach(function(e){d._isStatusForUpload(e.status)?
(f=d._renderUpload([e])[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer),d._updateUploadItem(f,e)):(f=d._renderDownload([e])[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer),d._updateDownloadItem(f,e));d.options.UUIDSdata[e.uuid]=e;d._forceReflow(f);h=d._addFinishedDeferreds();f.find(".filename .size").text(d._formatFileSize(e.size));f.find(".new_filename .size").text(d._formatFileSize(e.new_size));d._transition(f).done(function(){b.context=c(this);
d._trigger("completed",a,b);d._trigger("finished",a,b);h.resolve()})}.bind(this))},fail:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e;if(b.context)b.context.each(function(g){if("abort"!==b.errorThrown){var h=b.files[g];h.error=h.error||b.errorThrown||b.i18n("unknownError");f=d._addFinishedDeferreds();d._transition(c(this)).done(function(){var g=c(this);e=d._renderDownload([h]).replaceAll(g);d._forceReflow(e);d._transition(e).done(function(){b.context=
c(this);d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})})}else f=d._addFinishedDeferreds(),d._transition(c(this)).done(function(){c(this).remove();d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})});else if("abort"!==b.errorThrown){b.context=d._renderUpload(b.files)[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer).data("data",b);d._forceReflow(b.context);var f=d._addFinishedDeferreds();d._transition(b.context).done(function(){b.context=c(this);
d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})}else d._trigger("failed",a,b),d._trigger("finished",a,b),d._addFinishedDeferreds().resolve()},progress:function(a,b){if(a.isDefaultPrevented())return!1;var d=Math.floor(b.loaded/b.total*100);b.context&&b.context.each(function(){c(this).find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")})},progressall:function(a,b){if(a.isDefaultPrevented())return!1;a=c(this);var d=Math.floor(b.loaded/b.total*100),e=a.find(".fileupload-progress"),
f=e.find(".progress-extended");f.length&&f.html((a.data("blueimp-fileupload")||a.data("fileupload"))._renderExtendedProgress(b));e.find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")},start:function(a){if(a.isDefaultPrevented())return!1;var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b._resetFinishedDeferreds();b._transition(c(this).find(".fileupload-progress")).done(function(){b._trigger("started",a)})},stop:function(a){if(a.isDefaultPrevented())return!1;
var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),d=b._addFinishedDeferreds();c.when.apply(c,b._getFinishedDeferreds()).done(function(){b._trigger("stopped",a)});b._transition(c(this).find(".fileupload-progress")).done(function(){c(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");c(this).find(".progress-extended").html("\x26nbsp;");d.resolve()})},processstart:function(a){if(a.isDefaultPrevented())return!1;c(this).addClass("fileupload-processing")},
processstop:function(a){if(a.isDefaultPrevented())return!1;c(this).removeClass("fileupload-processing")},destroy:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=function(){d._transition(b.context).done(function(){c(this).remove();d._trigger("destroyed",a,b)})};b.url?(b.dataType=b.dataType||d.options.dataType,c.ajax(b).done(e).fail(function(){d._trigger("destroyfailed",a,b)})):e()}},_resetFinishedDeferreds:function(){this._finishedUploads=
[]},_addFinishedDeferreds:function(a){a||(a=c.Deferred());this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=c(this),b=a.prop("href"),d=a.prop("download");a.bind("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",d,b].join(":"))}catch(f){}})},_formatFileSize:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+
" MB":1E3<=a?(a/1E3).toFixed(2)+" KB":a.toFixed(2)+" B"},_formatBitrate:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" Gbit/s":1E6<=a?(a/1E6).toFixed(2)+" Mbit/s":1E3<=a?(a/1E3).toFixed(2)+" kbit/s":a.toFixed(2)+" bit/s"},_formatTime:function(a){var b=new Date(1E3*a);a=Math.floor(a/86400);return(a?a+"d ":"")+("0"+b.getUTCHours()).slice(-2)+":"+("0"+b.getUTCMinutes()).slice(-2)+":"+("0"+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(100*a).toFixed(2)+" %"},
_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime(8*(a.total-a.loaded)/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,b){if(!a)return c();a=a({files:b,formatFileSize:this._formatFileSize,options:this.options});return a instanceof c?a:c(this.options.templatesContainer).html(a).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(b,
d){c(d).append(a.files[b].preview)})},_renderUpload:function(a){a=this._filesVarsUpdate(a);return this._renderTemplate(this.options.uploadTemplate,a)},_filesVarsUpdate:function(a){for(var b=0;b<a.length;b++){var c=a[b],e=c.name.split("."),f=e.pop();0==e.length&&(f="");c.ext=f;c.new_name=e.join("")+"."+c.format;c.status||(c.status=this.options.steps.ready);this._addToCheckStatusIfNeed(c)}return a},_addToCheckStatusIfNeed:function(a){return a&&a.uuid&&a.status&&this._isStatusForUpload(a.status)?(this.options.checkStatusUUIDS[a.uuid]=
a.status,!0):!1},_renderDownload:function(a){a=this._filesVarsUpdate(a);return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},_startAllCheckEnabled:function(){var a=this.options.filesContainer,b=this.element.find(".fileupload-buttonbar .start"),d=!1;a.find(".template-upload .start").each(function(){0==c(this).prop("disabled")&&(d=!0)}).promise().done(function(){d?b.prop("disabled",!1):b.prop("disabled",!0)})},_startHandler:function(a){a.preventDefault();
a=c(a.currentTarget);var b=a.closest(".template-upload"),d=b.data("data");a.prop("disabled",!0);b.find(".dropdown button").prop("disabled",!0);b.find(".status p").html(lang.queue);var e=this.options.canUploadCheckTimeout,f=this._canUpload,g=function(){b.find(".status p").html(lang.downloading);d&&d.submit&&d.submit()},l=function(){setTimeout(function(){f(g,l)},e)};f(g,l);this._startAllCheckEnabled()},_startDownloadHandler:function(a){a.preventDefault();a=c(a.currentTarget).closest(".template-download").find("a");
window.location.href=a.attr("href")},_startHandlerNoMouseForOneItem:function(a){var b=a.closest(".template-upload"),c=b.data("data");a.hasClass("started")||(a.prop("disabled",!0),b.find(".dropdown button").prop("disabled",!0),b.find(".status p").html(lang.downloading),c&&c.submit&&(c.submit(),a.addClass("started")))},_cancelHandler:function(a){a.preventDefault();var b=c(a.currentTarget).closest(".template-upload,.template-download"),d=b.data("data")||{};d.context=d.context||b;d.abort?d.abort():(d.errorThrown=
"abort",this._trigger("fail",a,d));this._startAllCheckEnabled()},_deleteHandler:function(a){a.preventDefault();var b=c(a.currentTarget);b.closest(".template-download").find("button").prop("disabled",!0);this._trigger("destroy",a,c.extend({context:b.closest(".template-download"),type:"DELETE"},b.data()));this._startAllCheckEnabled()},_forceReflow:function(a){return c.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var b=c.Deferred();a.removeClass("in");a.removeClass("fade");
b.resolveWith(a);return b},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),b=this.options.filesContainer,d=this._startHandlerNoMouseForOneItem,e=a.find(".start"),f=this.options.canUploadCheckTimeout,g=this._canUpload;this._on(e,{click:function(a){a.preventDefault();if(0<b.find(".template-upload .start").length){b.find(".template-upload .start").prop("disabled",!0).addClass("fromAll");b.find(".template-upload .dropdown button").each(function(){var a=c(this);
a.prop("disabled")||(a.prop("disabled",!0),a.closest(".template-upload").find(".status p").html(lang.queue))});e.prop("disabled",!0);var h=function(a){var e=0,f=!1;b.find(".template-upload .start.fromAll").each(function(){var b=c(this);b.hasClass("started")||e++;e<=a?d(b):f||(f=!0,l())})},l=function(){setTimeout(function(){g(h,l)},f)};g(h,l)}}});this._on(a.find(".cancel"),{click:function(a){a.preventDefault();b.find(".cancel").click()}});this._on(a.find(".delete"),{click:function(c){c.preventDefault();
b.find(".toggle:checked").closest(".template-download").find(".delete").click();a.find(".toggle").prop("checked",!1)}});this._on(a.find(".toggle"),{change:function(a){b.find(".toggle").prop("checked",c(a.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,
{"click .start":this._startHandler,"click .startDownload":this._startDownloadHandler,"click .template-download a":this._startDownloadHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},
_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName"));g&&(a.uploadTemplateId&&(a.uploadTemplate=g(a.uploadTemplateId)),a.downloadTemplateId&&(a.downloadTemplate=g(a.downloadTemplateId)))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?a.filesContainer=this.element.find(".files"):
a.filesContainer instanceof c||(a.filesContainer=c(a.filesContainer))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();c.support.fileInput||this._disableFileInputButton();setInterval(this._statusCheck.bind(this),this.options.statusCheckTimeout)},_isStatusForUpload:function(a){switch(a){case this.options.steps.ready:case this.options.steps.received:case this.options.steps.working:case this.options.steps.converted:case this.options.steps.uploading:return!0}return!1},
_statusCheck:function(){var a=[],b;for(b in this.options.checkStatusUUIDS)a.push(b);0!=a.length&&c.ajax({url:"/status",type:"POST",data:{ids:a},cache:!1}).done(this._statusCheckDone.bind(this))},_statusCheckDone:function(a){a&&a.forEach(function(a){if(this._isStatusForUpload(a.status))this._updateUploadItem(c("input[value\x3d'"+a.uuid+"']").closest("tr"),a);else{for(var b in a)this.options.UUIDSdata[a.uuid][b]=a[b];b={context:c("input[value\x3d'"+a.uuid+"']").closest("tr.template-upload"),result:this.options.UUIDSdata[a.uuid]};
this._trigger("done",null,b);delete this.options.UUIDSdata[a.uuid];delete this.options.checkStatusUUIDS[a.uuid]}}.bind(this))},_updateUploadItem:function(a,b){b=lang[b.status];a.find(".status p").text(b);a.find("button").prop("disabled",!0);a.find(".progress").addClass(!c.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%")},_updateDownloadItem:function(a,b){var c=lang[b.status];a.find(".status p").text(c);b.status==this.options.steps.error&&a.find("button.startDownload").prop("disabled",
!0)},_canUpload:function(a,b){c.ajax({url:"/canupload",cache:!1}).done(function(c){c.ready?null!=a&&a(c.files):null!=b&&b()})},enable:function(){var a=!1;this.options.disabled&&(a=!0);this._super();a&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()}})});
var lang={ready:"Ready for upload",queue:"Waiting in queue",downloading:"Uploading",uploading:"Moving",received:"Received. Queue",working:"\u0421onverting",converted:"Converted",error:"Error",levelUptext:"\x3ccenter\x3eYou've Reached\x3cbr\x3e\x3cb\x3eLevel %1\x3c/b\x3e\x3cbr\x3eCongratulations!\x3c/center\x3e"},global={userUpdating:!1};
$(function(){$("#fileupload").fileupload({url:"upload"});$("#fileupload").fileupload("option","redirect",window.location.href.replace(/\/[^\/]*$/,"/cors/result.html?%s"));$("#fileupload").addClass("fileupload-processing");$.ajax({url:$("#fileupload").fileupload("option","url")+"/"+$("#toolType").val(),dataType:"json",cache:!1,context:$("#fileupload")[0]}).always(function(){$(this).removeClass("fileupload-processing");$(".drop_holder").removeClass("loading");setTimeout(checkDragPanel,100)}).done(function(c){$(this).fileupload("option",
"done").call(this,$.Event("done"),{result:c})});$("#fileupload").bind("fileuploadadded",function(c,g){$(".selectpicker").selectpicker();$(".selectpicker").selectpicker("render");checkDragPanel()});$("#fileupload").bind("fileuploaddestroy fileuploadfail fileuploaddone fileuploadalways fileuploadstop fileuploadchange fileuploadfinished",function(c,g){setTimeout(checkDragPanel,100)});setTimeout(function(){$("#fileupload").bind("fileuploadfinished",function(c,g){global.userUpdating||(global.userUpdating=
!0,$.ajax({url:"/user",cache:!1}).done(function(a){updateExp(a.level,a.exp);global.userUpdating=!1}))})},3E3);initDragPanel()});function updateExp(c,g){var a=$("h4.level span").text();$("div.levelinfo div.progress").addClass(!$.support.transition&&"progress-animated").attr("aria-valuenow",g).children().first().css("width",g+"%");c!=a&&($("h4.level span").text(c),c=lang.levelUptext.replace("%1",c),showNotification(c))}
function showNotification(c){$.notify({icon:"pe-7s-gift",message:c},{type:"success",timer:4E6,placement:{from:"top",align:"center"}})}
function initDragPanel(){function c(a){g=window.setTimeout(function(){$("body").removeClass("hover");return!1},25)}var g;$(document).on("dragover",function(a){a=a.originalEvent.dataTransfer;a.types&&(a.types.indexOf?-1!=a.types.indexOf("Files"):a.types.contains("Files"))&&($("body").addClass("hover"),window.clearTimeout(g))});$(document).on("dragleave",c);$(document).on("dragend",c);$(document).on("drop",c);$(".drag-indicator").on("click",c);$(".drag-indicator").mouseup(c)}
function checkDragPanel(){0<$("#fileupload tr").length?$(".drop_here").hide():$(".drop_here").show()}function setFormat(c,g){$(g).closest(".dropdown").find("button span:first-child").text(c);return!1};